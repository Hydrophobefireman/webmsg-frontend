!function(t){function e(e){for(var r,i,u=e[0],s=e[1],c=e[2],f=0,h=[];f<u.length;f++)i=u[f],o[i]&&h.push(o[i][0]),o[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);for(l&&l(e);h.length;)h.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,u=1;u<n.length;u++){var s=n[u];0!==o[s]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={2:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(t){var e=[],n=o[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise(function(e,r){n=o[t]=[e,r]});e.push(n[2]=r);var a,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=function(t){return i.p+""+({0:"chat-route",1:"loginroute",3:"user-page"}[t]||t)+"-"+{0:"c843ce8c666420aeb7c0",1:"89362919a9c06de54383",3:"bea3bb07e2ccba16af00"}[t]+".js"}(t),a=function(e){u.onerror=u.onload=null,clearTimeout(s);var n=o[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src,i=new Error("Loading chunk "+t+" failed.\n("+r+": "+a+")");i.type=r,i.request=a,n[1](i)}o[t]=void 0}};var s=setTimeout(function(){a({type:"timeout",target:u})},12e4);u.onerror=u.onload=a,document.head.appendChild(u)}return Promise.all(e)},i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var u=window.webpackJsonp=window.webpackJsonp||[],s=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var l=s;a.push([152,4]),n()}({1:function(t,e,n){"use strict";n.d(e,"h",function(){return h}),n.d(e,"i",function(){return d}),n.d(e,"b",function(){return p}),n.d(e,"k",function(){return v}),n.d(e,"d",function(){return g}),n.d(e,"m",function(){return b}),n.d(e,"a",function(){return k}),n.d(e,"g",function(){return w}),n.d(e,"f",function(){return x}),n.d(e,"j",function(){return _}),n.d(e,"o",function(){return C}),n.d(e,"n",function(){return S}),n.d(e,"c",function(){return R}),n.d(e,"e",function(){return E}),n.d(e,"l",function(){return j});n(77),n(72),n(128),n(130);var r,o=n(50),a=n.n(o),i=(n(52),n(53),n(88),n(62),n(131),n(133),n(137),n(138),n(140),n(31)),u=n.n(i),s=(n(141),n(0),n(22),n(2),n(86),n(51),n(33),n(73),n(10)),c=n.n(s),l=n(11),f=n.n(l),h=function(t){return t.constructor===Object},d=function(t){if("string"==typeof t)return"/"===t[0]?location.hash=t:location.hash="/".concat(t)},p=new(function(){function t(){c()(this,t),this.EventCache={}}return f()(t,[{key:"emit",value:function(t,e){return window.dispatchEvent(new CustomEvent(t,{detail:e}))}},{key:"listen",value:function(t,e){return this.EventCache[t]=e,window.addEventListener(t,e)}},{key:"detroyEvt",value:function(t,e){window.removeEventListener(t,e)}},{key:"destroyAll",value:function(){for(var t=Object.keys(this.EventCache),e=0;e<t.length;e++){var n=t[e];this.detroyEvt(n,this.EventCache[n])}}}]),t}()),v=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location;if("#"===e[0])t=e.substr(1);else try{t=new URL(e).hash.substr(1)}catch(e){t="/",console.log(e)}var n=t.split("?"),r=[0===t.length?"/":n[0],n[1]];return{path:r[0],qs:r[1]}},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return u()(Array(t)).join(".").replace(/[.]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})},m=((r=document.createElement("style")).innerHTML="",document.head.appendChild(r),r.sheet),y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return Array.from(e.rules).filter(function(e){return e.selectorText===t})[0]},b=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m,r=Object.keys(e),o=0;o<r.length;o++){var a=r[o];if(!["$$element","$$parent"].includes(a)){var i=e[a];if("class"===a)t.className="string"==typeof i?i:u()(i).join(" ");else if("events"===a)for(var s=Object.keys(i),c=0;c<s.length;c++){var l=s[c],f=i[l];t.addEventListener(l,f)}else if("style"===a){var d=void 0,p=void 0,v=void 0;if(d=h(i)?_(i):i,v=t.getAttribute("_routercontent")||e._routercontent){var b=y('[_routercontent="'.concat(v,'"]'));b?b.style=d:p=!0}else v=g(),p=!0;p&&(t.setAttribute("_routercontent",v),n.insertRule("[_routercontent='".concat(v,"']{").concat(d,"}")))}else["___innerHTML___","innerText","textContent"].includes(a)?"___innerHTML___"===a?t.innerHTML=i:t.textContent=i:t.setAttribute(a,i)}}},k={q:function(t){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?document.querySelector(t):Array.from(document.querySelectorAll(t))},id:function(t){return document.getElementById(t)},className:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Array.from(document.getElementsByClassName(t));return e?n[0]:n},create:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m,r=document.createElement(t);return e&&"object"==a()(e)&&b(r,e,n),r},get:function(t,e){return t.getAttribute(e)},set:function(t,e,n){return t.setAttribute(e,n)},empty:function(t){var e;for(e=t.lastChild;e;)t.removeChild(e),e=t.lastChild}},w=function(t){return t instanceof Function},x=function(t){return"AsyncFunction"===t.constructor.name},_=function(t){if("string"==typeof t)return t;for(var e=[],n=Object.keys(t),r=0;r<n.length;r++){var o=n[r];e.push("".concat(o,":").concat(t[o]))}return e.join(";")},C=function(t){return window.URLSearchParams?new URLSearchParams(t):"".concat(Object.keys(t).map(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))}).join("&"))};var S=function(t){try{var e={hour:"numeric",hour12:!0,minute:"numeric"},n=new Date(t),r=new Date;return n.getFullYear()!==r.getFullYear()&&(e.year="numeric"),a=r,((o=n).getFullYear()!==a.getFullYear()||o.getMonth()!==a.getMonth()||o.getDate()!==a.getDate())&&(e.month=e.day="numeric"),Intl.DateTimeFormat("auto",e).format(n)}catch(t){return console.log(t),now.toLocaleString()}var o,a},R=function(){return(new Date).getTime()},E=function(t,e){if(t){var n=t.routeCache();return n?n[e]:null}return null};function j(t,e){if(!window.customElements.get(t))return window.customElements.define(t,e)}k.q("noscript").remove()},149:function(t,e,n){},150:function(t,e,n){},151:function(t){t.exports={}},152:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=(n(22),n(2)),i=n.n(a),u=n(38),s=n.n(u),c=n(32),l=n.n(c),f=n(39),h=n.n(f),d=n(40),p=n.n(d),v=(n(73),n(77),n(109),n(33),n(62),n(82),n(52),n(53),n(86),n(88),n(102),n(103),n(51),n(31)),g=n.n(v),m=n(10),y=n.n(m),b=n(11),k=n.n(b),w=n(1),x={element:"a",attrs:{href:"/#/",style:{display:"block",color:"#000"}},events:{click:function(t){t.preventDefault(),location.hash="/"}},textContent:"Click Here to Go Back",children:[]},_={display:"block","text-align":"center","font-family":"sans-serif",padding:"8px",margin:"auto","font-weight":"bold"},C=new(function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.$ROOT||w.a.id("app-root")||w.a.q("body");y()(this,t),this._setVars(n),window.onhashchange=function(t){return e.navData=t,e.routeChange(),e._runDirectives()},this._runDirectives()}return k()(t,[{key:"parseHash",value:function(t){return Object(w.k)(t)}},{key:"__runConditionals",value:function(){var t=i()(o.a.mark(function t(){var e,n,r,a,i,u,s,c,l,f,h,d;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=g()(document.querySelectorAll("[_routerif]")),n=!0,r=!1,a=void 0,t.prev=4,i=e[Symbol.iterator]();case 6:if(n=(u=i.next()).done){t.next=26;break}if(s=u.value,c=w.a.get(s,"_routerif"),l=w.a.get(s,"_routerthen"),!new Function("$","return ".concat(c)).call(this,s)){t.next=16;break}(f=s.$)&&(s.replaceWith(f),l&&new Function("$",l).call(this,f)),t.next=23;break;case 16:if(!(s.$ instanceof HTMLElement)){t.next=18;break}return t.abrupt("continue",23);case 18:h={_routerif:c},l&&(h._routerthen=l),(d=w.a.create("router-data",h)).$=s,s.replaceWith(d);case 23:n=!0,t.next=6;break;case 26:t.next=32;break;case 28:t.prev=28,t.t0=t.catch(4),r=!0,a=t.t0;case 32:t.prev=32,t.prev=33,n||null==i.return||i.return();case 35:if(t.prev=35,!r){t.next=38;break}throw a;case 38:return t.finish(35);case 39:return t.finish(32);case 40:case"end":return t.stop()}},t,this,[[4,28,32,40],[33,,35,39]])}));return function(){return t.apply(this,arguments)}}()},{key:"__runEventListeners",value:function(){var t=i()(o.a.mark(function t(){var e,n,r,a,i,u,s,c=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=w.a.q("[_routerEvt][_routerAct]",!1),n=!0,r=!1,a=void 0,t.prev=4,i=function(){var t=s.value,e=w.a.get(t,"_routerEvt"),n=w.a.get(t,"_routerAct");t[e]=function(){new Function(n).call(c)}},u=e[Symbol.iterator]();!(n=(s=u.next()).done);n=!0)i();t.next=13;break;case 9:t.prev=9,t.t0=t.catch(4),r=!0,a=t.t0;case 13:t.prev=13,t.prev=14,n||null==u.return||u.return();case 16:if(t.prev=16,!r){t.next=19;break}throw a;case 19:return t.finish(16);case 20:return t.finish(13);case 21:case"end":return t.stop()}},t,this,[[4,9,13,21],[14,,16,20]])}));return function(){return t.apply(this,arguments)}}()},{key:"_runDirectives",value:function(){var t=i()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.__runConditionals();case 2:this.__runEventListeners();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"_callFuncWithThis",value:function(t,e,n,r){if(Object(w.f)(t,r))return t.apply(e,[r]).then(function(t){return n&&(t||{}).stopUpdate&&Object(w.m)(n,e.attrs),t});var o=t.apply(e,[r]);return n&&((o||{}).stopUpdate||Object(w.m)(n,e.attrs)),o}},{key:"_setVars",value:function(t){var e=this;this.stopSubsequentRenders=!1,this.root=t,this.routeMap={},this.routes=[],this.routeCache={},this.unMountFn=function(){},this.unmountRoute=function(){e.unMountFn(),e.routeCache={}},this.statusHandler={404:{element:"div",attrs:{style:_},textContent:"The Page you are requesting was not found",children:[x]},500:{element:"div",attrs:{style:_},textContent:"An Error Occured while trying to process your request",children:[x]}}}}]),k()(t,[{key:"isUserGoingBack",value:function(t){var e=this.navData||{};return!("".concat(location.protocol,"//").concat(location.host,"/#").concat(t)!=e.oldURL||(console.log("Same url navigation"),0))}},{key:"routeParser",value:function(t){return this.parseHash(t).path}},{key:"load",value:function(t){return Object(w.i)(t)}},{key:"lazyload",value:function(t,e,n){var r=this;n?this.registerRoute(n):this.registerRoute({route:t,element:"div",textContent:"loading",attrs:{style:{margin:"100px"}}});var o=this.getRouteName(this.currentRoute)===t;return o&&this.startLoad(),e.then(function(t){if(r.registerRoute(t.default),o)return r.startLoad()})}},{key:"startLoad",value:function(){this.routeChange()}},{key:"pushStatus",value:function(t,e){var n=this.statusHandler[t];return n.textContent=e||n.textContent,n?this.render(n,this.root,!0):this.render(this.statusHandler[404])}},{key:"getRouteName",value:function(t){var e=t.split("/").filter(function(t){return t})[0];return e?"/".concat(e,"/"):"/"}},{key:"isValidRoute",value:function(t){if(this.routes.includes(t))return{res:!0,args:null,_fRoute:t};try{var e=t.split("/").filter(function(t){return t}),n="/".concat(e[0],"/");return this.routes.includes(n)?{res:!0,args:e.slice(1),_fRoute:n}:{res:!1}}catch(e){return console.log(e),{res:!1}}}},{key:"routeChange",value:function(){var t=this.routeParser(location.href),e=this.isValidRoute(t),n=e.res,r=e.args,o=e._fRoute;n?(console.log("rendering"),this.render(this.routeMap[o],this.root,!0,r)):this.render(this.statusHandler[404],this.root,!0,r)}},{key:"__toSets",value:function(t){"string"==typeof t.attrs.class?t.attrs.class=new Set([t.attrs.class]):Array.isArray(t.attrs.class)&&(t.attrs.class=new Set(t.attrs.class))}},{key:"__objDef",value:function(t,e,n,r,a){var u=this,s=function(){return t.$$element};t.attrs=t.attrs||{},this.__toSets(t),t.getRouter=function(){return u},t.update=function(){if(s()&&t.attrs)return Object(w.m)(s(),t.attrs)},t.remove=function(){if(s().parentNode)return s().replaceWith((e=w.a.create("router-data"),t._$routerData=e,e));var e},t.add=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"block";t._$routerData&&(t._$routerData.replaceWith(s()),t._$routerData=void 0),e&&(s().style.display=e)},t.routeCache=function(){return u.routeCache},t.reRender=i()(o.a.mark(function i(){var c,l=arguments;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return c=l.length>0&&void 0!==l[0]?l[0]:t,t.attrs._routercontent=s().getAttribute("_routercontent"),o.t0=s(),o.next=5,u.render(c,e,n,r,a);case 5:return o.t1=o.sent,o.abrupt("return",o.t0.replaceWith.call(o.t0,o.t1));case 7:case"end":return o.stop()}},i,this)})),t.safeRerender=function(e){t.add(),t.reRender(e),t.add()}}},{key:"render",value:function(){var t=i()(o.a.mark(function t(e,n){var r,a,i,u,s,c,l,f,h,d,p,v,g,m,y,b,k,x,_,C,R,E,j,O,$,T,L=this,A=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=A.length>2&&void 0!==A[2]&&A[2],a=A.length>3?A[3]:void 0,i=A.length>4?A[4]:void 0,!this.stopSubsequentRenders){t.next=6;break}return console.log("preventing render"),t.abrupt("return");case 6:if(e){t.next=8;break}return t.abrupt("return");case 8:if(u=a||[],this._runDirectives(),s=e.element,c=e.attrs,l=e.beforeRender,f=e.onrender,h=e.textContent,d=e._innerHTML,p=e.onUnmount,v=e.events,g=e.children,m=e.isRoute,this.__objDef(e,n,r,u,i),(m||r)&&this.unmountRoute(),!Object(w.g)(l)){t.next=23;break}if(!Object(w.f)(l)){t.next=20;break}return t.next=17,this._callFuncWithThis(l,e,null,u);case 17:y=t.sent,t.next=21;break;case 20:y=this._callFuncWithThis(l,e,null,u);case 21:if(!y||!y.stopExec){t.next=23;break}return t.abrupt("return");case 23:for(b=w.a.create(s,c),k={},e.idx&&(k[e.idx]=e),Object.assign(this.routeCache,S(g),k),e.$$element=b,e.$$parent=i||null,h||0===h?b.textContent=h:d&&(console.warn("innerHTML can be dangerous!"),b.innerHTML=d),x=Object.keys(v||{}),_=function(){var t=x[C];b.addEventListener(t,function(n){return L._callFuncWithThis(v[t],e,b,n)})},C=0;C<x.length;C++)_();for(R=!0,E=!1,j=void 0,t.prev=36,O=(g||[])[Symbol.iterator]();!(R=($=O.next()).done);R=!0)T=$.value,this.render(T,b,!1,null,e);t.next=44;break;case 40:t.prev=40,t.t0=t.catch(36),E=!0,j=t.t0;case 44:t.prev=44,t.prev=45,R||null==O.return||O.return();case 47:if(t.prev=47,!E){t.next=50;break}throw j;case 50:return t.finish(47);case 51:return t.finish(44);case 52:if(r&&w.a.empty(n),n.appendChild(b),m&&(this.unMountFn=p||function(){}),!Object(w.g)(f)){t.next=62;break}if(!Object(w.f)(f)){t.next=61;break}return t.next=59,this._callFuncWithThis(f,e,b,u);case 59:t.next=62;break;case 61:this._callFuncWithThis(f,e,b,u);case 62:return t.abrupt("return",b);case 63:case"end":return t.stop()}},t,this,[[36,40,44,52],[45,,47,51]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"registerRoute",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(t.route&&t.element&&"/"===t.route[0]||e))throw new Error("invalid values");if(!e){this.routes.includes(t.route)||this.routes.push(t.route);var n=t.element,r=t.children,o=t.selector,a=t.attrs,i=t.beforeRender,u=t.events,s=t.hasRouteArgs,c=t.onUnmount,l=t.onrender,f=t.route,h=t.textContent,d=t._innerHTML,p=t.idx;return this.routeMap[f]={idx:p,element:n,selector:o,beforeRender:i,onrender:l,hasRouteArgs:s,attrs:a,textContent:h,_innerHTML:d,events:u,children:r,onUnmount:c,isRoute:!0}}var v=t.status;this.statusHandler[v]=t}},{key:"currentQS",get:function(){return this.parseHash(location.hash).qs}},{key:"currentRoute",get:function(){return this.routeParser(location.href)}}]),t}());function S(t){if(!t)return{};var e={},n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var u=a.value;u.idx&&(e[u.idx]=u)}}catch(t){r=!0,o=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return e}Object(w.l)("router-data",function(t){function e(){var t;return y()(this,e),(t=s()(this,l()(e).call(this))).attachShadow({mode:"open"}).appendChild(Object.assign(document.createElement("style"),{innerHTML:":host{display:none}"})),t}return h()(e,t),e}(p()(HTMLElement)));var R=function(){var t=i()(o.a.mark(function t(e){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",((n=document.createElement("link")).href=e,n.rel="stylesheet",document.head.appendChild(n)));case 4:t.prev=4,t.t0=t.catch(0),console.log("Could not append stylesheet",t.t0);case 7:case"end":return t.stop()}},t,this,[[0,4]])}));return function(e){return t.apply(this,arguments)}}(),E=n(37),j=(n(149),n(150),n(151),n(71),n(100)),O=n.n(j),$=n(74);R("https://fonts.googleapis.com/css?family=Open+Sans"),window.router=C;var T=C,L=w.a.id("app-banner");L&&(L.style.display="block");var A={route:"/logout/",element:"div",beforeRender:function(){return T.isUserGoingBack("/")?{stopExec:!0}:(localStorage.clear(),$.a.__clear__(),E.b.post("/api/logout/").then(function(){C.load("/")}))},textContent:"Logging you out"};T.registerRoute(A),Object(E.c)(T,!1).then(i()(o.a.mark(function t(){var e,r,a,i,u,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=n.e(0).then(n.bind(null,158)),r=n.e(3).then(n.bind(null,159)),a=n.e(1).then(n.bind(null,157)),i=[e,r,a],u=0;case 5:if(!(u<i.length)){t.next=16;break}return s=i[u],t.t0=T,t.next=10,s;case 10:t.t1=t.sent.default,t.t0.registerRoute.call(t.t0,t.t1),console.log("registered route..");case 13:u++,t.next=5;break;case 16:case"end":return t.stop()}},t,this)}))).then(function(){return console.log("Started router loading"),T.startLoad()});Object(E.a)()&&"serviceWorker"in navigator&&O.a.register().then(function(t){return console.log("SW registered.",t.scope)})},37:function(t,e,n){"use strict";n.d(e,"a",function(){return g}),n.d(e,"d",function(){return k}),n.d(e,"b",function(){return w}),n.d(e,"e",function(){return x}),n.d(e,"c",function(){return S}),n.d(e,"h",function(){return E}),n.d(e,"g",function(){return j}),n.d(e,"f",function(){return O});n(142),n(51),n(33),n(62),n(82);var r,o=n(96),a=n.n(o),i=(n(72),n(0)),u=n.n(i),s=(n(22),n(2)),c=n.n(s),l=(n(97),n(10)),f=n.n(l),h=n(11),d=n.n(h),p=(n(52),n(53),n(1)),v=n(71),g=function(){return"localhost"!==location.hostname},m=window.location.host.includes("localhost")?"localhost:5000":"webmsg.herokuapp.com",y="".concat(window.location.protocol,"//").concat(m),b=function(){function t(){f()(this,t)}return d()(t,[{key:"__defaultOnMessage",value:function(t){if(!["ping","pong"].includes(t.data)){var e=JSON.parse(t.data);this._socketID=e.socket_id}}},{key:"startConn",value:function(t){var e=this;return new Promise(function(n,r){var o;e.socket=new WebSocket((o=t,"".concat("https:"===window.location.protocol?"wss://":"ws://").concat(m,"/").concat(o))),e.socket.onopen=function(){e.socket.send("__init__"),e.socket.onmessage=e.__defaultOnMessage,e._pingPongs(),n(e.socket)},e.socket.onerror=function(t){return r(t)}})}},{key:"close",value:function(){try{this.socket.close()}catch(t){console.warn(t)}}},{key:"send",value:function(t){return this.socket.send(JSON.stringify(t))}},{key:"sendString",value:function(t){return this.socket.send(t)}},{key:"_pingPongs",value:function(){var t=this;this.pingtimer=setTimeout(function(){t.socket.readyState===t.socket.OPEN?(t.socket.send("ping"),t._pingPongs()):clearTimeout(t.pingtimer)},2e4)}},{key:"onmessage",set:function(t){this.socket.onmessage=function(e){return"ping"===e.data||"pong"===e.data?void 0:t(e)}}},{key:"readyState",get:function(){return this.socket.readyState}},{key:"isUsable",get:function(){return!this.socket||[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}}]),t}(),k=function(){return(r||{}).isUsable?r:r=new b},w=function(){function t(){f()(this,t)}return d()(t,null,[{key:"get",value:function(){var t=c()(u.a.mark(function t(e){var n,r,o,a=arguments;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],r=a.length>2&&void 0!==a[2]?a[2]:{},o=n?y+e:e,t.next=5,fetch(o,{headers:r,credentials:"include"});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"post",value:function(){var t=c()(u.a.mark(function t(e){var n,r,o,a,i=arguments;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(i.length>1&&void 0!==i[1])||i[1],r=i.length>2?i[2]:void 0,o=i.length>3&&void 0!==i[3]?i[3]:{"content-type":"application/x-www-form-urlencoded"},a=n?y+e:e,t.next=6,fetch(a,{method:"post",body:r,headers:o,credentials:"include"});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}(),x=function(){var t=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o={};return e.blur||(o.blur=function(){!function(t,e){if(!t.attrs.value||!t.attrs.value.trim()){var n=Object(p.e)(t,e);n.attrs.class.delete("moveup"),n.attrs.class.add("movedown"),n.update(),setTimeout(function(){return n.attrs.class.delete("movedown"),n.update()},110)}}(this,r),this.update()}),e.focus||(o.focus=function(){var t,e,n;this.attrs.untouched=!1,t=this,e=r,(n=Object(p.e)(t,e)).attrs.class.add("moveup"),n.attrs.class.delete("movedown"),n.update()},e.keydown||(o.keydown=function(t){85===t.keyCode&&t.ctrlKey&&(t.preventDefault(),this.$$element.value=this.$$element.value.slice(this.$$element.selectionStart,this.$$element.value.length),this.$$element.setSelectionRange(0,0))}),e.keyup||(o.keyup=function(){return this.attrs.value=this.$$element.value})),{idx:t,element:"input",attrs:{type:n?"password":"text",spellcheck:!1,class:"paper-input"},onrender:function(){this.attrs.value?this.$$element.focus():(this.attrs.untouched=!0,this.attrs.clean=!0)},events:a()({},e,o)}};return function(e,n,r,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{element:"div",children:[{idx:e,onrender:function(){var t=Object(p.e)(this,r);t&&t.$$element&&t.$$element.value.trim()&&(this.attrs.class=new Set(["_animate","moveup"]))},element:"div",textContent:n,attrs:{class:"_animate"}},t(r,o,a,e)]}}}(),_=function(t,e){return console.log(t),e.registerRoute(function(t){return{element:"div",status:503,textContent:"An error occured while contacting the server..please reload the page and try again",attrs:{style:{margin:"auto","text-align":"center"},class:"_errComponent"},children:[{element:"button",attrs:{style:{background:"#fff",color:"#000",border:"1px solid #6f70ee","border-radius":"20px",display:"block",margin:"auto","margin-top":"20px",padding:"8px",width:"20%",outline:"none",cursor:"pointer"},class:"ripple"},textContent:"Reload",events:{click:function(){return S(t)}}}]}}(e),!0),setTimeout(function(){return e.pushStatus(503),e.stopSubsequentRenders=!0},500)},C=function(){var t=c()(u.a.mark(function t(){var e,n=arguments;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(n.length>0&&void 0!==n[0])||n[0],router.stopSubsequentRenders=!1,p.a.empty(router.root),router.root.appendChild(new v.a(null,null,Object(p.j)({margin:"auto",position:"fixed",top:0,bottom:0,left:0,right:0}))),router.root.appendChild((r=void 0,(r=p.a.create("div",{style:"margin:auto;text-align:center"})).textContent="Connecting to the server",r)),t.next=7,w.get("/api/gen_204");case 7:setTimeout(function(){return e?router.startLoad():void 0},450);case 8:case"end":return t.stop()}var r},t,this)}));return function(){return t.apply(this,arguments)}}();function S(t,e){return R.apply(this,arguments)}function R(){return(R=c()(u.a.mark(function t(e,n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",j(function(){return C(n)},2,function(t){throw _(t,e),new Error("e")}));case 1:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var E=new(function(){function t(){f()(this,t),this._setVars()}return d()(t,[{key:"_setVars",value:function(){this.chatID=this.THERE=null}},{key:"getIntegrity",value:function(){var t=c()(u.a.mark(function t(){var e,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.post("/api/integrity/",!0,Object(p.o)({integrity:this.Integrity}));case 2:return t.next=4,t.sent.json();case 4:return e=t.sent,n=e.key,this.Integrity=n,t.abrupt("return",n);case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getUser",value:function(){var t=c()(u.a.mark(function t(){var e,n,r,o,a=arguments;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.length>0&&void 0!==a[0]&&a[0],n=a.length>1&&void 0!==a[1]&&a[1],navigator.onLine){t.next=4;break}return t.abrupt("return",localStorage.getItem("$$user"));case 4:if(!this.HERE||e){t.next=8;break}if(!n){t.next=7;break}return t.abrupt("return",this.HERE);case 7:return t.abrupt("return",!0);case 8:return t.prev=8,t.next=11,w.post("/api/getuser");case 11:if(!(r=t.sent).ok||r.error){t.next=23;break}return t.next=15,r.text();case 15:if(o=t.sent,this.HERE=o.substr(3),localStorage.setItem("$$user",this.HERE),!n){t.next=20;break}return t.abrupt("return",this.HERE);case 20:return t.abrupt("return",!0);case 23:return t.abrupt("return",!1);case 24:t.next=30;break;case 26:return t.prev=26,t.t0=t.catch(8),console.log(t.t0),t.abrupt("return",!1);case 30:case"end":return t.stop()}},t,this,[[8,26]])}));return function(){return t.apply(this,arguments)}}()}]),t}()),j=function(){var t=c()(u.a.mark(function t(e,n,r){var o,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<n)){t.next=16;break}return t.prev=2,t.next=5,e();case 5:return t.abrupt("return",t.sent);case 8:t.prev=8,t.t0=t.catch(2),o=t.t0;case 11:return t.next=13,new Promise(function(t){setTimeout(function(){return t()},100)});case 13:a++,t.next=1;break;case 16:r(o);case 17:case"end":return t.stop()}},t,this,[[2,8]])}));return function(e,n,r){return t.apply(this,arguments)}}(),O=function(){var t=c()(u.a.mark(function t(e){var n,r,o,a=arguments;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r="/?".concat(Object(p.o)({continue:e||location.hash.substr(1)})),o="".concat(location.protocol,"//").concat(location.host,"/#").concat(r),t.next=5,E.getUser(!0,!0);case 5:if(t.sent){t.next=15;break}if(o!=n.oldURL){t.next=12;break}return console.log("Same url navigation"),t.abrupt("return",{stopExec:!0});case 12:return t.abrupt("return",(console.log("Not logged in"),Object(p.i)(r),{stopExec:!0}));case 13:t.next=16;break;case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},71:function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n(10),o=n.n(r),a=n(38),i=n.n(a),u=n(32),s=n.n(u),c=n(11),l=n.n(c),f=n(39),h=n.n(f),d=n(40),p=n.n(d),v=n(1);var g=function(){var t=document.createElement("template");return t.innerHTML='<style>svg{-webkit-animation:rotate360 linear 2s;animation:rotate360 linear 2s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-transform-origin:50% 50%;-ms-transform-origin:50% 50%;transform-origin:50% 50%;display:inline-block;width:65px;height:65px}@-webkit-keyframes rotate360{0%{-webkit-transform:rotate(0);transform:rotate(0)}50%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}75%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate360{0%{-webkit-transform:rotate(0);transform:rotate(0)}50%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}75%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}circle{stroke-width:4px;stroke:#6f70ee;-webkit-animation:rotateSp linear 1.4s;animation:rotateSp linear 1.4s;-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;stroke-dasharray:185}@-webkit-keyframes rotateSp{0%{stroke-dashoffset:0}100%{stroke-dashoffset:-365}}@keyframes rotateSp{0%{stroke-dashoffset:0}100%{stroke-dashoffset:-365}}</style><svg viewbox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg>',t}(),m=function(t){function e(t,n,r,a){var u;o()(this,e),u=i()(this,s()(e).call(this));var c=g;return u.attachShadow({mode:"open"}).appendChild(c.content.cloneNode(!0)),u.svg=function(){return u.shadowRoot.querySelector("svg")},u.circle=function(){return u.shadowRoot.querySelector("circle")},t&&(u.size=t),n&&(u.color=n),r&&(u.svg().style=r),a&&(u.circle().style=a),u}return h()(e,t),l()(e,[{key:"attributeChangedCallback",value:function(t,e,n){"size"===t?this.size=n:"color"===t?this.color=n:"svgstyle"===t?this.svgstyle=n:"circlestyle"===t&&(this.circlestyle=n)}},{key:"size",set:function(t){var e=this.svg();e.style.height=e.style.width=t},get:function(){return this.svg().style.height}},{key:"color",set:function(t){this.circle().style.stroke=t},get:function(){return this.circle().style.stroke}},{key:"svgstyle",set:function(t){return this.svg().style=t}},{key:"circlestyle",set:function(t){return this.circle().style=t}}],[{key:"observedAttributes",get:function(){return["size","color","svgstyle","circlestyle"]}}]),e}(p()(HTMLElement));Object(v.l)("mat-spinner",m)},74:function(t,e,n){"use strict";n.d(e,"a",function(){return f});n(97);var r=n(10),o=n.n(r),a=n(11),i=n.n(a),u=n(0),s=n.n(u),c=(n(22),n(2)),l=n.n(c),f=function(t){var e=(f=l()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null);case 1:case"end":return t.stop()}},t,this)})),function(){return f.apply(this,arguments)}),n=e,r=e,a=e,u=e,c=e;var f;if(indexedDB){var h=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"WebCache",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;o()(this,e),this.storeName=r,this._dbase=new Promise(function(t,e){var o=indexedDB.open(n,1);o.onerror=function(e){return console.log(e),t(null)},o.onsuccess=function(){t(o.result)},o.onupgradeneeded=function(){o.result.createObjectStore(r)}})}return i()(e,[{key:"__IDBAct__",value:function(t,e){var n=this;return this._dbase.then(function(r){return new Promise(function(o,a){var i=r.transaction(n.storeName,t);i.oncomplete=function(){return o()},i.onabort=i.onerror=function(){return a()},e(i.objectStore(n.storeName))})}).catch(function(t){return console.log(t),null})}}]),e}(),d=function(){return new h};n=function(t){var e;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:d()).__IDBAct__("readonly",function(n){e=n.get(t)}).then(function(){return e.result}).catch(function(t){return console.log(t),null})},r=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d();try{return n.__IDBAct__("readwrite",function(n){n.put(e,t)})}catch(t){return null}},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d();try{e.__IDBAct__("readwrite",function(e){e.delete(t)})}catch(t){return null}},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d();try{return console.warn("clearing Store:",t),t.__IDBAct__("readwrite",function(t){t.clear()})}catch(t){return t}},a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d(),e=[];return t.__IDBAct__("readonly",function(t){(t.openKeyCursor||t.openCursor).call(t).onsuccess=function(){this.result&&(e.push(this.result.key),this.result.continue())}}).then(function(){return e}).catch(function(t){return null})}}return{get:n,set:r,__clear__:u,keys:a,del:c}}("KeyStore")}});