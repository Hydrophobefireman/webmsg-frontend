(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{11:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r(2);const o=e=>{const t=Object(n.getElement)(e,"__errorbox__");return t.textContent="Loading..",t.attrs.style.visibility="visible",t.reRender(t),t},a={login:{fields_empty_or_session_error:"Check Your Username and Password or try to reload the page",no_such_user:"No Such User Exists",incorrect_password:"incorrect password"},register:{fields_empty_or_session_error:"Check Your Username and Password or try to reload the page",bad_request:"Bad Username or Password",username_taken:"Username Already Taken"}};function i(e,t){const r=(this.attrs.value||t.target.value).trim(),s=Object(n.getElement)(this,`${e}UserPH`);if(s.attrs.class.delete("error"),s.attrs.textContent="username",s.update(),r){if(!c(r))return s.attrs.class.add("error"),s.attrs.textContent="Invalid Username",s.update(),this.attrs.hasError=!0;this.attrs.hasError=!1,13===t.keyCode&&Object(n.getElement)(this,`${e}PasswordInput`).$$element.focus()}}function l(e){i.call(this,"login",e)}const c=e=>{if(0<e.length)return/^[0-9a-zA-Z_.-]+$/.test(e)};function u(e,t,r=(()=>{}),s="password"){const o=e.target.value,a=Object(n.getElement)(this,t);if(a.attrs.textContent=s,a.attrs.class.delete("error"),a.update(),13===e.keyCode)return!o.trim()||4>o.length?(a.attrs.class.add("error"),a.attrs.textContent="Invalid Password",a.update(),this.attrs.hasError=!0):(this.attrs.hasError=!1,r())}const d=Object(s.matInput)("loginUserPH","username","loginUserInput",{keydown:l,keyup(e){this.attrs.value=this.$$element.value,l.call(this,e)}}),p=Object(s.matInput)("signupUserPH","username","signupUserInput",{keydown:function(e){i.call(this,"signup",e)},keyup(e){this.attrs.value=this.$$element.value,l.call(this,e)}}),g={idx:"loginBtn",element:"button",attrs:{style:{"border-radius":"5px",margin:"10px"},class:["ripple","actionbtn"]},textContent:"Login",events:{click(){const e=Object(n.getElement)(this,"sgupbx"),t=Object(n.getElement)(this,"loginBox");e.remove(),t.add()}}},h={element:"button",attrs:{style:{"border-radius":"5px",margin:"10px"},class:["ripple","actionbtn"]},textContent:"signup",events:{click(){const e=Object(n.getElement)(this,"sgupbx"),t=Object(n.getElement)(this,"loginBox");e.add(),t.remove()}}},m={element:"div",attrs:{id:"loginBox",style:{border:"2px solid #e3e3e3"}},onrender(){this.remove()},children:[d,Object(s.matInput)("loginPasswordPH","password","loginPasswordInput",{keydown(e){return u.call(this,e,"loginPasswordPH",()=>(function(e){const t=o(e),r=Object(n.getElement)(e,"loginUserInput");if(r.attrs.hasError||e.attrs.hasError)return;const i=r.$$element.value,l=e.$$element.value;return Object(s.retry)(async()=>{const e=await s.Requests.post("/login/check/",!0,Object(n.urlencode)({user:i,password:l,integrity:await s.utilService.getIntegrity()})),r=await e.json();if(!e.ok||r.error){const e=a.login[r.error];return t.textContent=e||"An unknown error occured on our end..",t.reRender(t)}if(r.success){t.$$element.textContent="Authenticated";const{qs:e}=Object(n.parseHash)(location),s=new URLSearchParams(e).get("continue");return s?Object(n.load)(s):Object(n.load)(`/u/${r.user}`),t.textContent="",t.reRender(t)}},2,e=>(console.log(e),t.textContent="An error occured..please try again",t.reRender(t)))})(this))},keyup(){this.attrs.value=this.$$element.value}},!0)],idx:"loginBox"},b={element:"div",attrs:{id:"signupBox",style:{border:"2px solid #e3e3e3"}},onrender(){this.remove()},children:[p,Object(s.matInput)("signupPasswordPH","password","signupPasswordInput",{keydown(e){return u.call(this,e,"signupPasswordPH",()=>Object(n.getElement)(this,"signupPassConfInput").$$element.focus())},keyup(){this.attrs.value=this.$$element.value}},!0),Object(s.matInput)("signupPassConfPH","confirm password","signupPassConfInput",{keydown(e){return u.call(this,e,"signupPassConfPH",()=>(function(e){const t=o(e),r=Object(n.getElement)(e,"signupUserInput"),i=Object(n.getElement)(e,"signupPasswordInput");if(r.attrs.hasError||e.attrs.hasError||i.hasError)return;const l=r.$$element.value,c=i.$$element.value,u=e.$$element.value;Object(s.retry)(async()=>{const e=await s.Requests.post("/register/check/",!0,Object(n.urlencode)({user:l,password:c,checkpw:u,integrity:await s.utilService.getIntegrity()})),r=await e.json();if(!e.ok||r.error){const e=a.register[r.error];return t.textContent=e||"An unknown error occured on our end..",t.reRender(t)}if(r.success)return t.textContent="Account Created. Please Login",t.reRender(t)},2,()=>t.$$element.textContent="An Unknown error occured..please try again")})(this),"confirm password")},keyup(){this.attrs.value=this.$$element.value}},!0)],idx:"sgupbx"};t.default={element:"div",attrs:{id:"auth-component",style:{margin:"auto","text-align":"center"}},async beforeRender(){if(await s.utilService.getUser(!0)){const{qs:e}=Object(n.parseHash)(location),t=new URLSearchParams(e).get("continue");if(t)return Object(n.load)(t),{stopExec:!0};{const e=`/u/${s.utilService.HERE}`;return this.getRouter().isUserGoingBack(e)?{stopExec:!0}:(Object(n.load)(e),{stopExec:!0})}}},onrender:()=>console.log("Rendered Login Component"),children:[g,h,{element:"div",idx:"__errorbox__",attrs:{style:{visibility:"hidden",color:"#ff0000","font-weight":"bold"},textContent:""}},m,b],route:"/"}}}]);